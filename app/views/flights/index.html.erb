<h1>Flights</h1>

<%= form_with(url: flights_path, method: "get") do %>
  <%= select_tag(:departure_airport, options_for_select(@departure_airports.uniq)) %>
  <%= select_tag(:arrival_airport, options_for_select(@arrival_airports.uniq)) %>
  <%= select_tag(:number_of_passengers, options_for_select([[1, 1], [2, 2], [3, 3], [4, 4]])) %>
  <%= select_tag(:flight_date, options_for_select(@flight_date.uniq)) %>
  <%= submit_tag("Search") %>
<% end %>

<% unless @params_flights.empty? || params[:flight_date].nil? %>
  <%= form_with(url: new_booking_path, method: "get") do |form| %>
    <%= form.collection_radio_buttons :flights, @params_flights, :id, :flight_date %>
    <%# MAYBE THIS ABOVE IS A WAY TO SOLVE IT BUT IDK %>
    <br>

    <% @params_flights.each do |flight| %>
      <br>
      <%= form.radio_button :flight, :flight => { id: flight.id, num_pass: params[:number_of_passengers].to_i } %>
      <%= THIS NESTED ARRAY ABOVE IS BEING PASSED AS A STRING SO I CANT ACCESS THE INSIDE OF IT%>
      <%= form.label :flight, flight.display_info %>
    <% end %>
    <%= form.submit%>
  <% end %>
<% else %>
  <h2>No flights available :(</h2>
<% end %>

<%# NEXT THING TO WORK ON, FIGURE OUT HOW TO SEND NUMBER OF PASSENGERS TO THE BOOKINGS CONTROLLER %>